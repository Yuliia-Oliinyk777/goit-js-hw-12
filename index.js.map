{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n    return `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p>Likes: ${likes}</p>\n          <p>Views: ${views}</p>\n          <p>Comments: ${comments}</p>\n          <p>Downloads: ${downloads}</p>\n        </div>\n      </li>`\n}\n","import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com';\nexport const fetchImages = (searchedQuery, page)=> {\n    const axiosConfig = {\n        params: {\n            key:'45636659-15209a2e9fad59db9d3b17888',\n            q: searchedQuery,\n        page: page,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch:  true,\n        }\n    }\n     return axios.get('/api/', axiosConfig);\n};\n\n\n","import iziToast from \"izitoast\";\n\nimport SimpleLightbox from \"simplelightbox\";\n\nimport { createGalleryCardTemplate } from \"./js/render-functions.js\";\n\nimport { fetchImages } from \"./js/pixabay-api.js\";\n\nconst searchForm = document.querySelector('.search-form');\n\nconst galleryList = document.querySelector('.gallery-list');\n\nconst loader = document.querySelector('.loader');\n\nconst loadMoreBtn = document.querySelector('.load-btn');\n\nlet currentPage = 1;\nlet searchedWord = '';\nlet totalPages = 0;\nlet cardHeight = 0;\nconst simpleLightbox = new SimpleLightbox('.gallery-item a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n});\nconst onSearchFormSubmit = async event => {\n    try {\n        event.preventDefault();\n        searchedWord = searchForm.elements.user_query.value.trim();\n        \n    \n         if (searchedWord === '') {\n        iziToast.show({\n        message: 'Please enter a search term.',\n        messageColor: '#ffffff',\n        backgroundColor: '#ef4040',\n                   position: 'topRight',\n    });\n             galleryList.innerHTML = '';\n             loadMoreBtn.classList.add('is-hidden');\n        return;\n    }\n        currentPage = 1;\n        const response = await fetchImages(searchedWord, currentPage);\n        searchForm.reset();\n\n        galleryList.innerHTML = '';\n        \n\n        if (response.data.hits.length === 0)\n        {\n            iziToast.warning({\n                   message: 'Sorry, there are no images matching your search query. Please try again!',\n                   messageColor: '#ffffff',\n                   backgroundColor: '#ef4040',\n                   position: 'topRight',\n            });\n            loadMoreBtn.classList.add('is-hidden');\n               return;\n           }\n           \n         const galleryCardsTenmplate = response.data.hits.map(imgInfo => createGalleryCardTemplate(imgInfo)).join('');\n         galleryList.innerHTML = galleryCardsTenmplate;\n        \n           simpleLightbox.refresh();\n         \n         const galleryCard = document.querySelector('.gallery-item');\n         cardHeight = galleryCard.getBoundingClientRect().height;\n       \n         totalPages = Math.ceil(response.data.totalHits / response.data.hits.length);\n         if (totalPages > 1) {\n            loadMoreBtn.classList.remove('is-hidden');\n         } else {\n            loadMoreBtn.classList.add('is-hidden'); \n        }\n         \n    } catch (error) {\n        iziToast.error({\n            message: `Something went wrong: ${error.message}`,\n            backgroundColor: '#ef4040',\n            messageColor: '#ffffff',\n                   position: 'topRight',\n        });\n    } \n    \n}\nconst onLoadMoreBtnClick = async event => {\n    try {\n            loader.classList.remove('is-hidden');\n            currentPage++;\n            const response = await fetchImages(searchedWord, currentPage);\n            console.log(response);\n            \n            const galleryCardsTenmplate = response.data.hits.map(imgInfo => createGalleryCardTemplate(imgInfo)).join('');\n            galleryList.insertAdjacentHTML(\"beforeend\", galleryCardsTenmplate);\n           simpleLightbox.refresh();\n        scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n        if (currentPage >= totalPages) {\n                   iziToast.warning({\n                   message: \"We're sorry, but you've reached the end of search results\",\n                   messageColor: '#ffffff',\n                   backgroundColor: '#ef4040',\n                   position: 'topRight',\n               });\n              \n            loadMoreBtn.classList.add('is-hidden');\n             return;\n        }\n        } catch (error) {\n            iziToast.error({\n            message: `Something went wrong: ${error.message}`,\n            backgroundColor: '#ef4040',\n            messageColor: '#ffffff',\n            position: 'topRight',\n        });\n        }finally {\n         loader.classList.add('is-hidden');\n    }\n    \n    }\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick)\n\n"],"names":["createGalleryCardTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","axios","fetchImages","searchedQuery","page","axiosConfig","searchForm","galleryList","loader","loadMoreBtn","currentPage","searchedWord","totalPages","cardHeight","simpleLightbox","SimpleLightbox","onSearchFormSubmit","event","iziToast","response","galleryCardsTenmplate","imgInfo","error","onLoadMoreBtnClick"],"mappings":"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"}